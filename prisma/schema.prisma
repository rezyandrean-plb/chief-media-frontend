generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 Int                 @id @default(autoincrement())
  email              String              @unique
  name               String
  passwordHash       String
  role               UserRole            @default(client)
  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  passwordSet        Boolean             @default(false)
  verificationTokens VerificationToken[]
}

model VerificationToken {
  id        Int       @id @default(autoincrement())
  token     String    @unique
  type      String    @default("set_password")
  expiresAt DateTime
  usedAt    DateTime?
  createdAt DateTime  @default(now())
  userId    Int
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Vendor {
  id             Int       @id @default(autoincrement())
  document_id    String?
  name           String?
  company        String?
  created_at     DateTime?
  updated_at     DateTime?
  published_at   DateTime?
  created_by_id  Int?
  updated_by_id  Int?
  locale         String?
  email          String?
  phone          String?
  address        String?
  specialties    Json?     @map("specialties")
  website        String?
  social_media   Json?
  business_hours Json?
  pricing        Json?
  specialty      String?   @default("General Services") @map("specialty_new")
  rating         Float?    @default(5.0) @map("rating_new")
  reviews        Int?      @default(0) @map("reviews_new")
  location       String?   @default("") @map("location_new")
  image          String?   @map("image_new")
  profileImage   String?   @map("profile_image")
  services       String[]  @default([]) @map("services_new")
  priceRange     String?   @map("price_range")
  description    String?   @map("description_new")
  status         String?   @default("pending") @map("status_new")
  createdAt      DateTime? @default(now()) @map("created_at_new")
  updatedAt      DateTime? @default(now()) @map("updated_at_new")

  @@map("vendors")
}

model VendorEnquiry {
  id                Int      @id @default(autoincrement())
  firstName         String
  lastName          String
  email             String
  phone             String
  businessName      String?
  serviceType       String
  experience        String
  location          String
  portfolio         String?
  description       String
  agreedToTerms     Boolean
  address           String?
  linkedin          String?
  status            String   @default("pending")
  convertedToVendor Int?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@map("vendor_enquiries")
}

model Studio {
  id          String    @id
  name        String    // Required
  location    String    // Required
  hourlyRate  Float     // Required
  description String?
  capacity    Int?
  photos      Json?     // Array of strings
  equipment   Json?     // Array of Equipment objects
  availability Json?    // Array of Availability objects
  amenities   Json?     // Array of strings
  size        String?
  status      String?   @default("active") // "active" | "maintenance" | "inactive"
  createdAt   DateTime  @default(now())

  @@map("studios")
}

enum UserRole {
  client
  vendor
  organization
  realtor
}
